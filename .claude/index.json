{
  "version": "1.3.0",
  "lastUpdated": "2026-02-05T00:00:00.000Z",
  "projectName": "CogniaLauncher",
  "projectDescription": "Cross-platform environment and package manager with modern GUI",
  "techStack": {
    "frontend": ["Next.js 16.0.10", "React 19.2.0", "TypeScript 5.9.3", "Tailwind CSS 4.1.18", "shadcn/ui", "Zustand 5.0.11", "next-intl 4.8.2", "next-themes 0.4.6"],
    "backend": ["Tauri 2.9.0", "Rust 1.77.2+", "Tokio 1.45", "SQLx 0.8"],
    "testing": ["Jest 30.2.0", "Testing Library 16.3.2", "jsdom 30.2.0"],
    "tooling": ["pnpm", "ESLint 9.39.2", "TypeScript 5.9.3", "PostCSS", "tw-animate-css"]
  },
  "modules": [
    {
      "name": "frontend",
      "path": ".",
      "type": "nextjs-app",
      "language": "TypeScript/TSX",
      "entryPoints": ["app/layout.tsx", "app/page.tsx"],
      "keyDirectories": ["app/", "components/", "lib/", "hooks/"],
      "interfaces": [
        "app/page.tsx - Dashboard overview",
        "app/environments/page.tsx - Environment management UI",
        "app/packages/page.tsx - Package management UI",
        "app/providers/page.tsx - Provider configuration UI",
        "app/cache/page.tsx - Cache management interface",
        "app/settings/page.tsx - Application settings",
        "app/downloads/page.tsx - Download management UI",
        "app/logs/page.tsx - Log viewer",
        "app/about/page.tsx - About page with system info"
      ],
      "dependencies": {
        "key": ["@tauri-apps/api 2.10.1", "@tauri-apps/plugin-log 2.8.0", "@tauri-apps/plugin-opener 2.5.3", "next-intl 4.8.2", "zustand 5.0.11", "@tanstack/react-query 5.90.20", "next-themes 0.4.6"],
        "ui": ["@radix-ui/react-*", "lucide-react 0.546.0", "sonner 2.0.7", "class-variance-authority 0.7.1", "cmdk 1.1.1"],
        "dev": ["jest 30.2.0", "@testing-library/react 16.3.2", "eslint 9.39.2", "@tailwindcss/postcss 4.1.18", "ts-jest 29.4.6"]
      },
      "testing": {
        "framework": "Jest 30",
        "config": "jest.config.ts",
        "setup": "jest.setup.ts",
        "testFiles": 14,
        "coverage": {
          "enabled": true,
          "threshold": { "branches": 60, "functions": 60, "lines": 70, "statements": 70 },
          "reporters": ["json", "text", "lcov", "html", "clover", "cobertura", "junit"]
        }
      },
      "qualityTools": {
        "linting": "ESLint 9.39.2 with eslint-config-next",
        "typeCheck": "tsc --noEmit",
        "formatting": "Tailwind CSS 4.1.18 with PostCSS"
      },
      "coverage": { "scanned": true, "percent": 90 },
      "routes": {
        "dashboard": "app/page.tsx",
        "environments": "app/environments/page.tsx",
        "packages": "app/packages/page.tsx",
        "providers": "app/providers/page.tsx",
        "cache": "app/cache/page.tsx",
        "settings": "app/settings/page.tsx",
        "downloads": "app/downloads/page.tsx",
        "logs": "app/logs/page.tsx",
        "about": "app/about/page.tsx"
      },
      "stateManagement": {
        "stores": [
          "lib/stores/packages.ts - Package state",
          "lib/stores/environment.ts - Environment state",
          "lib/stores/settings.ts - Settings state",
          "lib/stores/appearance.ts - Appearance/theme state",
          "lib/stores/download.ts - Download state",
          "lib/stores/log.ts - Log state"
        ],
        "hooks": [
          "hooks/use-packages.ts",
          "hooks/use-environments.ts",
          "hooks/use-settings.ts",
          "hooks/use-downloads.ts",
          "hooks/use-tray-sync.ts",
          "hooks/use-logs.ts",
          "hooks/use-profiles.ts",
          "hooks/use-health-check.ts",
          "hooks/use-auto-version.ts",
          "hooks/use-auto-update.ts",
          "hooks/use-appearance-config-sync.ts",
          "hooks/use-keyboard-shortcuts.ts",
          "hooks/use-settings-shortcuts.ts",
          "hooks/use-unsaved-changes.ts",
          "hooks/use-network.ts",
          "hooks/use-package-export.ts",
          "hooks/use-version-cache.ts",
          "hooks/use-mobile.ts",
          "hooks/use-about-data.ts"
        ]
      },
      "components": {
        "ui": "components/ui/ - shadcn/ui components (26+ components: alert, alert-dialog, avatar, badge, button, card, checkbox, collapsible, command, dialog, dropdown-menu, input, label, popover, progress, scroll-area, select, separator, sheet, sidebar, skeleton, sonner, switch, table, tabs, tooltip)",
        "dashboard": "components/dashboard/ - Dashboard components (stats-card, quick-actions, quick-search, package-list, environment-list)",
        "environments": "components/environments/ - Environment management components (environment-card, add-environment-dialog, installation-progress-dialog, version-browser-panel, health-check-panel, batch-operations)",
        "packages": "components/packages/ - Package management components (package-list, search-bar, package-details-dialog, update-manager, stats-overview, dependency-tree)",
        "settings": "components/settings/ - Settings components (general-settings, appearance-settings, network-settings, mirrors-settings, paths-settings, provider-settings, security-settings, tray-settings, update-settings, system-info)",
        "layout": "components/layout/ - Layout components (sidebar, titlebar, breadcrumb, page-header)",
        "providers": "components/providers/ - Context providers (theme-provider, locale-provider, log-provider, tray-provider)",
        "log": "components/log/ - Log panel components (log-panel, log-toolbar, log-drawer, log-entry, log-file-viewer)",
        "downloads": "components/downloads/ - Download components (add-download-dialog, download-toolbar, download-empty-state)",
        "provider-management": "components/provider-management/ - Provider management components (provider-list, provider-card, provider-stats, provider-toolbar)"
      },
      "new_features": {
        "system_tray": {
          "provider": "components/providers/tray-provider.tsx",
          "hook": "hooks/use-tray-sync.ts",
          "settings": "components/settings/tray-settings.tsx"
        },
        "command_palette": {
          "component": "components/command-palette.tsx",
          "shortcut": "Ctrl+K / Cmd+K",
          "ui": "components/ui/command.tsx"
        },
        "downloads_system": {
          "page": "app/downloads/page.tsx",
          "store": "lib/stores/download.ts",
          "hook": "hooks/use-downloads.ts"
        },
        "log_panel": {
          "page": "app/logs/page.tsx",
          "components": "components/log/",
          "store": "lib/stores/log.ts",
          "hook": "hooks/use-logs.ts"
        }
      }
    },
    {
      "name": "tauri-backend",
      "path": "src-tauri",
      "type": "rust-lib",
      "language": "Rust",
      "entryPoints": ["src/main.rs", "src/lib.rs"],
      "keyDirectories": ["src/commands/", "src/core/", "src/provider/", "src/cache/", "src/config/", "src/platform/", "src/download/", "src/resolver/"],
      "interfaces": {
        "environment": [
          "env_list", "env_get", "env_install", "env_uninstall", "env_use_global", "env_use_local",
          "env_detect", "env_detect_all", "env_available_versions", "env_list_providers",
          "env_resolve_alias", "env_install_cancel", "env_save_settings", "env_load_settings"
        ],
        "package": [
          "package_search", "package_info", "package_install", "package_uninstall", "package_list",
          "provider_enable", "provider_disable", "provider_check", "provider_system_list",
          "provider_status_all", "package_check_installed", "package_versions"
        ],
        "config": ["config_get", "config_set", "config_list", "config_reset", "get_cognia_dir", "get_platform_info"],
        "cache": [
          "cache_info", "cache_clean", "cache_clean_preview", "cache_clean_enhanced",
          "cache_verify", "cache_repair", "get_cache_settings", "set_cache_settings",
          "get_cleanup_history", "clear_cleanup_history", "get_cleanup_summary",
          "get_cache_access_stats", "reset_cache_access_stats",
          "list_cache_entries", "delete_cache_entry", "delete_cache_entries",
          "get_top_accessed_entries"
        ],
        "batch": [
          "batch_install", "batch_uninstall", "batch_update", "resolve_dependencies",
          "check_updates", "package_pin", "package_unpin", "get_pinned_packages",
          "package_rollback", "get_install_history", "get_package_history", "clear_install_history"
        ],
        "search": ["advanced_search", "search_suggestions", "compare_packages"],
        "updater": ["self_check_update", "self_update"],
        "download": [
          "download_add", "download_get", "download_list", "download_stats",
          "download_pause", "download_resume", "download_cancel", "download_remove",
          "download_pause_all", "download_resume_all", "download_cancel_all",
          "download_clear_finished", "download_retry_failed",
          "download_set_speed_limit", "download_get_speed_limit",
          "download_set_max_concurrent",
          "download_history_list", "download_history_search", "download_history_stats",
          "download_history_clear", "download_history_remove",
          "disk_space_get", "disk_space_check"
        ],
        "log": ["log_list_files", "log_query", "log_clear", "log_get_dir", "log_export"],
        "manifest": ["manifest_read", "manifest_init"],
        "tray": [
          "tray_set_icon_state", "tray_update_tooltip", "tray_set_active_downloads",
          "tray_set_has_update", "tray_set_language", "tray_set_click_behavior",
          "tray_get_state", "tray_is_autostart_enabled", "tray_enable_autostart",
          "tray_disable_autostart", "tray_send_notification", "tray_rebuild"
        ],
        "custom_detection": [
          "custom_rule_list", "custom_rule_get", "custom_rule_add", "custom_rule_update",
          "custom_rule_delete", "custom_rule_toggle", "custom_rule_presets",
          "custom_rule_import_presets", "custom_rule_detect", "custom_rule_detect_all",
          "custom_rule_test", "custom_rule_validate_regex", "custom_rule_export",
          "custom_rule_import", "custom_rule_list_by_env", "custom_rule_extraction_types"
        ],
        "health_check": ["health_check_all", "health_check_environment"],
        "profiles": [
          "profile_list", "profile_get", "profile_create", "profile_update",
          "profile_delete", "profile_apply", "profile_export", "profile_import",
          "profile_create_from_current"
        ],
        "launch": [
          "launch_with_env", "launch_with_streaming", "env_activate",
          "env_get_info", "exec_shell_with_env", "which_program"
        ],
        "shim": [
          "shim_create", "shim_remove", "shim_list", "shim_update", "shim_regenerate_all",
          "path_status", "path_setup", "path_remove", "path_check", "path_get_add_command"
        ]
      },
      "dependencies": {
        "core": ["tauri 2.9", "tokio 1.45", "serde 1.0", "serde_json 1.0"],
        "database": ["sqlx 0.8 with sqlite"],
        "network": ["reqwest 0.12"],
        "error": ["thiserror 2.0", "anyhow 1.0"],
        "plugins": ["tauri-plugin-log 2.8", "tauri-plugin-opener 2.5", "tauri-plugin-updater 2", "tauri-plugin-window-state 2", "tauri-plugin-notification 2", "tauri-plugin-autostart 2"],
        "features": ["custom-protocol"]
      },
      "testing": {
        "framework": "None configured",
        "recommendation": "Add Rust unit tests with cargo test infrastructure"
      },
      "qualityTools": {
        "rustfmt": "Available",
        "clippy": "Recommended"
      },
      "coverage": { "scanned": true, "percent": 95 },
      "providers": [
        "nvm", "fnm", "bun",
        "pyenv",
        "rustup",
        "rbenv", "sdkman", "goenv",
        "npm", "pnpm", "yarn",
        "pip", "uv", "poetry",
        "cargo",
        "brew", "apt", "dnf", "pacman", "zypper", "snap", "flatpak", "apk", "macports",
        "winget", "chocolatey", "scoop", "vcpkg",
        "docker",
        "github",
        "psgallery",
        "deno", "phpbrew", "bundler", "composer", "dotnet"
      ],
      "modules": {
        "commands": "commands/ - Tauri IPC command handlers (15 modules)",
        "core": "core/ - Business logic (9 modules)",
        "provider": "provider/ - 40+ package provider implementations",
        "cache": "cache/ - SQLite + JSON dual-backend caching (9 modules)",
        "download": "download/ - Download manager with queue and throttling (5 modules)",
        "config": "config/ - Configuration management (4 modules)",
        "platform": "platform/ - Cross-platform abstraction (5 modules)",
        "resolver": "resolver/ - Dependency resolution (4 modules)",
        "tray": "tray.rs - System tray implementation"
      },
      "new_features": {
        "download_manager": {
          "manager": "src/download/manager.rs - DownloadManager",
          "queue": "src/download/queue.rs - DownloadQueue",
          "task": "src/download/task.rs - DownloadTask with state machine",
          "throttle": "src/download/throttle.rs - SpeedLimiter with token bucket",
          "history": "src/cache/download_history.rs - SQLite persistence",
          "commands": "src/commands/download.rs - 25+ Tauri commands"
        },
        "system_tray": {
          "implementation": "src/tray.rs - Complete tray implementation",
          "features": ["Multi-language menu (en/zh)", "Dynamic icon states", "Quick actions", "Autostart", "Notifications"],
          "commands": "13+ Tauri commands for tray control"
        },
        "enhanced_cache": {
          "enhanced": "src/cache/enhanced.rs - Enhanced cache features",
          "history": "src/cache/history.rs - Cleanup history tracking",
          "features": ["Trash support", "History tracking", "Preview before clean", "Access stats"]
        },
        "custom_detection": {
          "core": "src/core/custom_detection.rs - Custom version detection rules",
          "commands": "src/commands/custom_detection.rs - 17+ Tauri commands",
          "features": ["9 extraction strategies", "Preset rules", "Version transformation", "Priority-based evaluation"]
        },
        "profiles": {
          "core": "src/core/profiles.rs - Environment profiles",
          "commands": "src/commands/profiles.rs - 9 Tauri commands",
          "features": ["Profile management", "Apply profiles", "Import/export"]
        },
        "health_check": {
          "core": "src/core/health_check.rs - Health check system",
          "commands": "src/commands/health_check.rs - 2 Tauri commands",
          "features": ["Environment health", "System health", "Issue detection"]
        }
      }
    },
    {
      "name": "openspec",
      "path": "openspec",
      "type": "documentation",
      "language": "Markdown",
      "keyDirectories": ["specs/", "changes/"],
      "specs": [
        "platform-abstraction", "provider-system", "environment-management",
        "package-installation", "dependency-resolution", "configuration-system",
        "cache-management", "ui-interface"
      ],
      "coverage": { "scanned": true, "percent": 100 }
    },
    {
      "name": "llmdoc",
      "path": "llmdoc",
      "type": "documentation",
      "language": "Markdown",
      "structure": {
        "overview": [
          "testing-infrastructure.md", "settings-and-theme-system.md", "batch-operations.md",
          "command-palette.md", "downloads-system.md", "system-tray.md",
          "custom-detection-system.md"
        ],
        "guides": [
          "testing-guide.md", "implementing-environment-installation-cancellation.md",
          "batch-progress-integration.md", "add-settings-section.md", "add-accent-color.md",
          "command-palette-actions.md", "downloads-integration.md", "system-tray-integration.md",
          "custom-detection-integration.md"
        ],
        "architecture": [
          "testing-architecture.md", "cache-system.md", "batch-operations-system.md",
          "settings-system.md", "settings-ui-components.md", "self-update-system.md",
          "environment-installation-progress.md", "log-panel-system.md",
          "command-palette.md", "downloads-system.md", "system-tray.md",
          "custom-detection-system.md", "provider-system.md"
        ],
        "reference": [
          "error-handling.md", "keyboard-shortcuts.md", "theme-system.md", "version-caching.md",
          "auto-version-detection.md", "cache-commands.md", "environment-version-alias-resolution.md",
          "batch-api.md", "settings-and-theme-apis.md", "downloads-api.md",
          "custom-detection-api.md", "tray-api.md"
        ]
      },
      "coverage": { "scanned": true, "percent": 100, "total_files": 35 }
    }
  ],
  "architecture": {
    "runtimeModel": "dual",
    "modes": {
      "web": { "command": "pnpm dev", "url": "http://localhost:3000", "description": "Next.js 16 development server" },
      "desktop": { "command": "pnpm tauri dev", "description": "Tauri 2.9 wraps Next.js in native window", "config": "src-tauri/tauri.conf.json" }
    },
    "communication": "Tauri invoke_handler for Rust-frontend IPC with 120+ commands",
    "stateManagement": "Zustand 5.0.11 for global state, React hooks for local state",
    "styling": {
      "framework": "Tailwind CSS 4.1.18 with PostCSS (@tailwindcss/postcss)",
      "theme": "CSS variables with oklch color space",
      "darkMode": "Class-based (.dark)",
      "components": "shadcn/ui (new-york style, RSC mode)"
    },
    "internationalization": "next-intl 4.8.2 with messages/en.json and messages/zh.json",
    "build": {
      "frontend": "Static export to out/ directory (output: export)",
      "desktop": "Tauri bundles for Windows (MSI), macOS (DMG), Linux (AppImage)"
    },
    "new_features": {
      "download_manager": "Queue-based download system with throttling, progress tracking, and SQLite history",
      "system_tray": "Multi-language tray with dynamic icons, quick actions, and autostart support",
      "command_palette": "Global command search with Ctrl+K / Cmd+K shortcut",
      "enhanced_cache": "Cache with trash support, cleanup history, and preview functionality",
      "custom_detection": "User-defined version detection rules with 9 extraction strategies",
      "profiles": "Environment profile management for quick switching",
      "health_check": "System health monitoring for environments"
    }
  },
  "fileStats": {
    "totalEstimated": 300,
    "scanned": 270,
    "coveragePercentage": 90,
    "byLanguage": { "TypeScript/TSX": 110, "Rust": 95, "Markdown": 40, "JSON": 25, "CSS": 15, "MJS": 5 },
    "byDirectory": {
      "app/": 15,
      "components/": 90,
      "lib/": 35,
      "hooks/": 30,
      "src-tauri/src/": 95,
      "llmdoc/": 35,
      "openspec/": 20
    }
  },
  "ignoredPatterns": [
    "node_modules/**", ".git/**", ".github/**", ".next/**", "out/**", "build/**", "dist/**",
    "coverage/**", "src-tauri/target/**", "*.lock", "*.log", "*.bin", "*.pdf",
    "*.png", "*.jpg", "*.jpeg", "*.gif", "*.mp4", "*.zip", "*.tar", "*.gz",
    ".DS_Store", ".windsurfrules", ".ace-tool/"
  ],
  "gaps": [
    { "area": "Rust Testing", "description": "No Rust unit tests found", "recommendation": "Add cargo test infrastructure in src-tauri/src/" },
    { "area": "E2E Testing", "description": "No end-to-end tests configured", "recommendation": "Consider Playwright for E2E testing" },
    { "area": "CI/CD", "description": "GitHub Actions workflow not found", "recommendation": "Add .github/workflows/ for CI/CD" },
    { "area": "Tray Icons", "description": "Missing icon variations for different states", "recommendation": "Add icons for downloading/update/error states" }
  ],
  "nextSteps": [
    "Add Rust unit tests in src-tauri/src/",
    "Consider adding E2E tests with Playwright",
    "Set up GitHub Actions workflow for CI/CD",
    "Add tray icon variations for different states (downloading, update, error)",
    "Update docs for new providers: rbenv, sdkman, goenv, deno, phpbrew, bundler, composer, dotnet, poetry"
  ],
  "truncated": false,
  "scanMetadata": {
    "scanDate": "2026-02-05T00:00:00.000Z",
    "scanMethod": "adaptive-architecture-init-v3",
    "phases": [
      "phase-a-inventory - Complete file enumeration with ignore patterns",
      "phase-b-module-scan - All modules scanned with provider list update",
      "phase-c-deep-scan - Not required - Coverage sufficient for documentation"
    ],
    "toolsUsed": ["Glob for file discovery", "Read for content analysis", "Grep for pattern matching"]
  },
  "documentationIndex": "llmdoc/index.md",
  "keyFiles": {
    "config": [
      "package.json", "src-tauri/Cargo.toml", "src-tauri/tauri.conf.json",
      "next.config.ts", "tsconfig.json", "jest.config.ts", "components.json",
      "postcss.config.mjs"
    ],
    "documentation": ["CLAUDE.md", "README.md", "llmdoc/index.md", "openspec/AGENTS.md"],
    "entryPoints": ["app/layout.tsx", "app/page.tsx", "src-tauri/src/main.rs", "src-tauri/src/lib.rs"],
    "new_features": [
      "components/providers/tray-provider.tsx",
      "hooks/use-tray-sync.ts",
      "src-tauri/src/tray.rs",
      "src-tauri/src/download/manager.rs",
      "src-tauri/src/core/custom_detection.rs",
      "src-tauri/src/core/profiles.rs",
      "src-tauri/src/core/health_check.rs"
    ],
    "new_providers": [
      "src-tauri/src/provider/rbenv.rs",
      "src-tauri/src/provider/sdkman.rs",
      "src-tauri/src/provider/goenv.rs",
      "src-tauri/src/provider/deno.rs",
      "src-tauri/src/provider/phpbrew.rs",
      "src-tauri/src/provider/bundler.rs",
      "src-tauri/src/provider/composer.rs",
      "src-tauri/src/provider/dotnet.rs",
      "src-tauri/src/provider/poetry.rs"
    ]
  },
  "changelog": [
    "2026-02-05: Updated provider count to 40+, added new providers (rbenv, sdkman, goenv, deno, phpbrew, bundler, composer, dotnet, poetry)",
    "2026-02-05: Added hooks directory scan with 30 hooks",
    "2026-02-05: Updated command count to 120+ Tauri commands",
    "2026-02-05: Added new features: profiles, health_check, custom_detection",
    "2026-02-05: Increased coverage to 90% (270/300 files)"
  ]
}
